<div class="container">
  <nav class="navbar navbar-expand-lg navbar-light">

    <a id="home-button" class="text-secondary nav-link nav-item active" [routerLink]="['../../']">
      <i class="fa fa-home"></i>
    </a>
    <a class="navbar-brand">Amministrazione prenotazioni</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Filtra per
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" (click)="displayFilterBox(1)">Data</a>
            <a class="dropdown-item" (click)="displayFilterBox(2)">Spiaggia</a>
          </div>
        </li>
      </ul>
      <form *ngIf="filterBox === 1" class="form-inline my-2 my-lg-0" (change)="filterReservationsByDate()">
        <input class="form-control" type="date" name="date" [(ngModel)]="filterDate">
      </form>
      <form *ngIf="filterBox === 2" class="form-inline my-2 my-lg-0" (change)="filterReservationsByBeach()">
        <select class="custom-select" name="filterBeachSelect" [(ngModel)]="filterBeach">
          <option *ngFor="let beach of beaches" value="{{beach.name}}">{{beach.name}}</option>
        </select>
      </form>
      <button class="{{getButtonState()}}" (click)="resetFilter()">Resetta filtro</button>
    </div>
  </nav>
</div>

<div class="container" *ngIf="loaded && reservations.length > 0">
  <table class="table table-hover text-center">
    <thead class="thead-light">
      <tr>
        <th scope="col">Spiaggia</th>
        <th scope="col">Data</th>
        <th scope="col">Nome</th>
        <th scope="col">Quantità</th>
        <th scope="col">Mezza giornata</th>
      </tr>
    </thead>
    <tbody *ngIf="!isFilterActive">
      <tr *ngFor="let reserv of reservations" (click)="goToDetail(reserv.idReservation)">
        <th scope="row">{{ reserv.beach_name }}</th>
        <td>{{ reserv.date }}</td>
        <td>{{ reserv.name_reservation }}</td>
        <td>{{ reserv.quantity }}</td>
        <td><i class="{{getInfoClass(reserv.half_day)}}" aria-hidden="true"></i></td>
      </tr>
    </tbody>
    <tbody *ngIf="isFilterActive && filteredRes.length > 0">
    <tr *ngFor="let reserv of filteredRes" (click)="goToDetail(reserv.idReservation)">
      <th scope="row">{{ reserv.beach_name }}</th>
      <td>{{ reserv.date }}</td>
      <td>{{ reserv.name_reservation }}</td>
      <td>{{ reserv.quantity }}</td>
      <td><i class="{{getInfoClass(reserv.half_day)}}" aria-hidden="true"></i></td>
    </tr>
    </tbody>
  </table>

  <div class="container text-center" *ngIf="isFilterActive && filteredRes.length === 0">
    Non è presente alcuna prenotazione secondo il criterio selezionato.
  </div>

</div>
<div *ngIf="loaded && reservations.length === 0">
  <p>Non è presente alcuna prenotazione</p>
</div>